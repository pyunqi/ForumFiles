# 🚀 ForumFiles 快速部署指南

所有准备工作已完成！现在开始部署到 Zeabur。

---

## ✅ 已准备好的内容

- ✅ 代码已推送：https://github.com/pyunqi/ForumFiles
- ✅ JWT 密钥已生成
- ✅ SMTP 邮件已配置（Resend）
- ✅ 环境变量已配置好

**你现在只需要在 Zeabur 网页上点点鼠标！**

---

## 第一步：登录 Zeabur（1分钟）

1. 打开：https://dash.zeabur.com
2. 点击 **"Sign in with GitHub"**
3. 授权登录

---

## 第二步：创建项目（1分钟）

1. 点击右上角 **"New Project"** 按钮
2. 选择区域：**Hong Kong**（速度快）
3. 点击 **"Create"**

---

## 第三步：部署后端（5分钟）

### 3.1 添加后端服务

1. 在项目页面，点击 **"Add Service"** 或 **"Create Service"**
2. 选择 **"Git"**
3. 如果提示授权 GitHub，点击授权
4. 选择仓库：**pyunqi/ForumFiles**
5. **重要**：在 "Root Directory" 下拉框选择 **`server`**
6. 点击 **"Deploy"** 按钮

### 3.2 添加持久化存储

1. 等待服务部署完成（约1-2分钟）
2. 点击后端服务的卡片
3. 找到顶部标签栏的 **"Volumes"** 或 **"持久化存储"**
4. 点击 **"Create Volume"** 或 **"添加卷"**
5. 填写：
   - **Mount Path**: `/data`
   - **Size**: 1 GB（或更大）
6. 点击 **"Add"** 或 **"创建"**

### 3.3 配置环境变量

1. 点击顶部标签栏的 **"Variables"** 或 **"环境变量"**
2. **打开文件** `ZEABUR_ENV_BACKEND.txt`（在你的项目文件夹）
3. **复制文件中的所有内容**
4. **粘贴**到 Zeabur 的环境变量编辑器中
   - 如果是单行输入模式，点击切换到 "Raw Editor" 或 "原始编辑器"
5. 点击 **"Save"** 或 **"保存"**
6. 等待服务重新部署（约30秒）

### 3.4 获取后端 URL

1. 回到服务卡片页面
2. 找到 **"Domains"** 或 **"域名"** 区域
3. 复制 Zeabur 生成的域名，类似：
   ```
   https://forumfiles-server-production-xxxx.zeabur.app
   ```
4. **重要：把这个 URL 记下来**（可以发给我，我帮你后面的配置）

---

## 第四步：部署前端（3分钟）

### 4.1 添加前端服务

1. 回到项目主页（点击左上角项目名）
2. 点击 **"Add Service"** 或 **"Create Service"**
3. 选择 **"Git"**
4. 选择仓库：**pyunqi/ForumFiles**
5. **重要**：在 "Root Directory" 选择 **`client`**
6. 点击 **"Deploy"**

### 4.2 配置前端环境变量

1. 等待服务部署完成
2. 点击前端服务卡片
3. 点击 **"Variables"** 或 **"环境变量"**
4. 添加一个环境变量：
   - **Key**: `VITE_API_URL`
   - **Value**: （填入第3步记录的后端 URL）

   例如：
   ```
   VITE_API_URL=https://forumfiles-server-production-xxxx.zeabur.app
   ```
5. 点击 **"Save"** 或 **"保存"**
6. 等待重新部署

### 4.3 获取前端 URL

1. 回到服务卡片
2. 找到 **"Domains"**
3. 复制前端 URL，类似：
   ```
   https://forumfiles-client-production-xxxx.zeabur.app
   ```
4. **重要：把这个 URL 也记下来**

---

## 第五步：更新 CORS 配置（1分钟）

1. 回到**后端服务**卡片
2. 点击 **"Variables"**
3. 找到 `ALLOWED_ORIGINS` 这一行
4. 把值改成你的**前端 URL**：
   ```
   ALLOWED_ORIGINS=https://forumfiles-client-production-xxxx.zeabur.app
   ```
5. 点击 **"Save"**
6. 等待重新部署

---

## 🎉 完成！测试系统

### 访问你的网站

打开你的前端 URL，应该能看到登录页面！

### 登录测试

使用管理员账号登录：
- **邮箱**: pyunqi@gmail.com
- **密码**: 62532356

### 测试功能

1. ✅ 登录成功
2. ✅ 上传一个文件
3. ✅ 下载文件
4. ✅ 删除文件
5. ✅ 点击右上角进入管理后台
6. ✅ 尝试生成公共下载链接
7. ✅ 测试验证码登录（会发邮件到 pyunqi@gmail.com）

---

## ⚠️ 重要提示

### 1. 立即修改密码
登录后，建议修改管理员密码为更强的密码！

### 2. 保存你的网址
- **前端网址**：（你的访问入口）
- **后端网址**：（API 服务）

### 3. 如果有问题

**最常见的问题：前端显示白屏或 CORS 错误**

解决方法：
1. 检查前端的 `VITE_API_URL` 是否正确（不要有末尾斜杠）
2. 检查后端的 `ALLOWED_ORIGINS` 是否是前端 URL
3. 打开浏览器控制台（F12）查看具体错误
4. 截图发给我，我帮你看

**其他问题**：
- 随时截图给我
- 复制错误信息给我
- 我会帮你解决！

---

## 📋 部署检查清单

完成后检查：

- [ ] 后端服务显示 "Running"
- [ ] 后端有持久化存储（/data, 1GB）
- [ ] 后端环境变量已配置（约15个变量）
- [ ] 前端服务显示 "Running"
- [ ] 前端环境变量有 VITE_API_URL
- [ ] 后端 ALLOWED_ORIGINS 是前端 URL
- [ ] 能访问前端网页
- [ ] 能登录管理员账号
- [ ] 能上传和下载文件

全部打勾 = 部署成功！🎉

---

需要帮助？**随时告诉我当前在哪一步，遇到什么问题！**
